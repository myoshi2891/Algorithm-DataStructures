# **問題概要**

## 主要なセクション

1. **問題概要と数字-文字マッピング**
2. **バックトラッキングアルゴリズムの実装コード**
3. **処理フローの詳細解析**
4. **Mermaid 図による探索木の可視化**
5. **実行ステップの詳細追跡テーブル**
6. **関数呼び出しスタックのシーケンス図**
7. **時間・空間計算量の詳細解析**
8. **エッジケース処理のフローチャート**
9. **テストケースと結果一覧**
10. **最適化ポイントと実装注意点**

## 特徴

- **Mermaid 図を使用した視覚的説明**（日本語エラーを避けるため英数字で表記）
- **具体的な実行例（digits="23"）の詳細追跡**
- **計算量の数学的解析と具体例**
- **実装時の注意点とベストプラクティス**

## 入力

数字列 `"23"`

## 電話キー対応

| 数字 | 対応文字 |
| ---- | -------- |
| 2    | a, b, c  |
| 3    | d, e, f  |

---

## **再帰（バックトラッキング）の動作イメージ**

### 入力：`digits = "23"`

以下のように、**木構造で全探索**しています。

```text
                    ""
           /         |         \
         "a"        "b"        "c"
       /   \       /   \       /   \
    "ad"  "ae"  "bd"  "be"  "cd"  "ce"
      |     |     |     |     |     |
    "af"  "af"  "bf"  "bf"  "cf"  "cf"
```

---

### **具体的な処理フロー**

1. **初期呼び出し**

```typescript
backtrack(0, "");
```

- index: 0（最初の文字）
- path: ""（現在の文字列は空）

---

2.**1 段目（digits\[0] = '2'）**

```typescript
letters = "abc";
```

- "a" を選択 → 次の桁へ
- "b" を選択 → 次の桁へ
- "c" を選択 → 次の桁へ

---

3.**2 段目（digits\[1] = '3'）**

```typescript
letters = "def";
```

各パターンごとに以下を繰り返す：

| 文字列    | 動作      |
| --------- | --------- |
| "a" + "d" | "ad" 完成 |
| "a" + "e" | "ae" 完成 |
| "a" + "f" | "af" 完成 |
| "b" + "d" | "bd" 完成 |
| "b" + "e" | "be" 完成 |
| "b" + "f" | "bf" 完成 |
| "c" + "d" | "cd" 完成 |
| "c" + "e" | "ce" 完成 |
| "c" + "f" | "cf" 完成 |

---

## **全体の組み合わせ図**

```text
2: [a, b, c]
3: [d, e, f]

全組み合わせ：
[a] -> [d, e, f] => "ad", "ae", "af"
[b] -> [d, e, f] => "bd", "be", "bf"
[c] -> [d, e, f] => "cd", "ce", "cf"
```

---

## **コード処理ごとの解説**

| 処理                      | 内容                     | 図解                      |
| ------------------------- | ------------------------ | ------------------------- |
| `backtrack(0, "")`        | 探索開始                 | `""`                      |
| `path + letter`           | 部分文字列を構築         | 例："a"、"b"、"c"         |
| `index === digits.length` | 終端判定、組み合わせ確定 | "ad"など                  |
| `result.push(path)`       | 結果保存                 | `["ad", "ae", "af", ...]` |

---

## **時間・空間計算量**

- **時間計算量**: `O(3^N × 4^M)`
  - `N`: 3 文字に対応する数字（2, 3, 4, 5, 6, 8）の個数
  - `M`: 4 文字に対応する数字（7, 9）の個数
- **空間計算量**: `O(組み合わせ数 + 再帰スタック)`
  - 生成される組み合わせの総数と、再帰呼び出しの深さに比例します。

---

## **まとめ図（最終結果）**

```text
Input: "23"

出力:
["ad", "ae", "af",
 "bd", "be", "bf",
 "cd", "ce", "cf"]
```

---

## **視覚化まとめ**

- **木構造探索（バックトラッキング）**
- **全探索（DFS）で全組み合わせ列挙**
- **3 文字 ×3 文字 → 9 パターン出力**

## 含まれている内容

✅ **問題概要と数字マッピング**
✅ **バックトラッキング実装コード**
✅ **処理フローの詳細解析**
✅ **Mermaid 探索木図**
✅ **詳細な実行追跡テーブル**
✅ **関数呼び出しスタックのシーケンス図**
✅ **計算量解析（時間・空間）**
✅ **エッジケース処理フローチャート**
✅ **テストケースと結果一覧**
✅ **最適化ポイントと実装注意点**
✅ **まとめと学習効果**

Mermaid のフローチャート構文にエラーがあります。修正いたします。修正しました。問題は条件分岐ノード内でシングルクォート（`'`）を使用していたことでした。Mermaid の構文では、条件分岐ノード内でシングルクォートを使用するとパースエラーが発生するため、ダブルクォート（`"`）に変更しました。

修正点：

- `{digits == ''}` → `{"digits == ''"}`
- `{index == len(digits)}` → `{"index == len(digits)"}`

これで Mermaid フローチャートが正常に表示されるはずです。

以下は **`letterCombinations` 関数の具体的な処理を図解しながら詳しく解説**します。

---

## **問題概要**

### 入力：

数字列 `"23"`

### 電話キー対応：

| 数字 | 対応文字    |
| -- | ------- |
| 2  | a, b, c |
| 3  | d, e, f |

---

## **再帰（バックトラッキング）の動作イメージ**

### 入力：`digits = "23"`

以下のように、**木構造で全探索**しています。

```
                    ""
           /         |         \
         "a"        "b"        "c"
       /   \       /   \       /   \
    "ad"  "ae"  "bd"  "be"  "cd"  "ce"
      |     |     |     |     |     |
    "af"  "af"  "bf"  "bf"  "cf"  "cf"
```

---

### **具体的な処理フロー**

1. **初期呼び出し**

```typescript
backtrack(0, "")
```

* index: 0（最初の文字）
* path: ""（現在の文字列は空）

---

2. **1段目（digits\[0] = '2'）**

```typescript
letters = "abc"
```

* "a" を選択 → 次の桁へ
* "b" を選択 → 次の桁へ
* "c" を選択 → 次の桁へ

---

3. **2段目（digits\[1] = '3'）**

```typescript
letters = "def"
```

各パターンごとに以下を繰り返す：

| 文字列       | 動作      |
| --------- | ------- |
| "a" + "d" | "ad" 完成 |
| "a" + "e" | "ae" 完成 |
| "a" + "f" | "af" 完成 |
| "b" + "d" | "bd" 完成 |
| "b" + "e" | "be" 完成 |
| "b" + "f" | "bf" 完成 |
| "c" + "d" | "cd" 完成 |
| "c" + "e" | "ce" 完成 |
| "c" + "f" | "cf" 完成 |

---

## **全体の組み合わせ図**

```
2: [a, b, c]
3: [d, e, f]

全組み合わせ：
[a] -> [d, e, f] => "ad", "ae", "af"
[b] -> [d, e, f] => "bd", "be", "bf"
[c] -> [d, e, f] => "cd", "ce", "cf"
```

---

## **コード処理ごとの解説**

| 処理                        | 内容           | 図解                        |
| ------------------------- | ------------ | ------------------------- |
| `backtrack(0, "")`        | 探索開始         | `""`                      |
| `path + letter`           | 部分文字列を構築     | 例："a"、"b"、"c"             |
| `index === digits.length` | 終端判定、組み合わせ確定 | "ad"など                    |
| `result.push(path)`       | 結果保存         | `["ad", "ae", "af", ...]` |

---

## **時間・空間計算量**

| 項目    | 内容                                                             |
| ----- | -------------------------------------------------------------- |
| 時間計算量 | O(3^N × 4^M) <br> N：3文字のキー（2,3,4,5,6,8）個数 <br> M：4文字のキー（7,9）個数 |
| 空間計算量 | O(組み合わせ数 + 再帰スタック)                                             |

---

## **まとめ図（最終結果）**

```
Input: "23"

出力: 
["ad", "ae", "af",
 "bd", "be", "bf",
 "cd", "ce", "cf"]
```

---

## **視覚化まとめ**

* **木構造探索（バックトラッキング）**
* **全探索（DFS）で全組み合わせ列挙**
* **3文字×3文字 → 9パターン出力**
